<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מחשבון שעות חילן</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-clock"></i> מחשבון שעות חילן</h1>
        </header>

        <!-- Login Card -->
        <div class="card" id="login-card">
            <div class="card-header">
                <h2><i class="fas fa-sign-in-alt"></i> התחברות לחילן</h2>
            </div>
            <div class="card-body">
                <form id="login-form">
                    <div class="form-group">
                        <label for="orgId">מספר ארגון</label>
                        <input type="text" id="orgId" name="orgId" value="3023" required>
                    </div>
                    <div class="form-group">
                        <label for="username">מספר עובד</label>
                        <input type="text" id="username" name="username" value="35391" required>
                    </div>
                    <div class="form-group">
                        <label for="password">סיסמה</label>
                        <input type="password" id="password" name="password" required autocomplete="off">
                    </div>
                    <button type="submit" class="btn primary-btn">
                        <i class="fas fa-sign-in-alt"></i> התחברות
                    </button>
                </form>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div class="loader hidden" id="loader">
            <div class="spinner"></div>
            <p>טוען נתונים מחילן...</p>
        </div>

        <!-- Results Card -->
        <div class="card hidden" id="results-card">
            <!-- Header -->
            <div class="card-header">
                <h2><i class="fas fa-chart-bar"></i> סיכום שעות עבודה</h2>
                <div class="card-actions">
                    <button id="export-csv" class="btn icon-btn" title="ייצוא ל-CSV">
                        <i class="fas fa-file-csv"></i>
                    </button>
                    <button id="print-results" class="btn icon-btn" title="הדפסה">
                        <i class="fas fa-print"></i>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <!-- Primary Metrics -->
                <div class="summary-area">
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-calendar-days"></i>
                        </div>
                        <div class="summary-details">
                            <span class="summary-title">ימי עבודה</span>
                            <span class="summary-value" id="total-days">0</span>
                        </div>
                    </div>
                    <div class="summary-card" id="required-hours-card">
                        <div class="summary-icon">
                            <i class="fas fa-business-time"></i>
                        </div>
                        <div class="summary-details">
                            <span class="summary-title">דרישת שעות חודשית</span>
                            <span class="summary-value" id="monthly-requirement">0</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <div class="summary-details">
                            <span class="summary-title">ממוצע יומי</span>
                            <span class="summary-value" id="daily-average">0</span>
                        </div>
                    </div>
                </div>

                <!-- Secondary Metrics -->
                <div class="summary-area monthly-requirement">
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="summary-details">
                            <span class="summary-title">סה"כ שעות</span>
                            <span class="summary-value" id="total-hours">0</span>
                        </div>
                    </div>
                    <div class="summary-card" id="remaining-hours-card">
                        <div class="summary-icon">
                            <i class="fas fa-hourglass-half"></i>
                        </div>
                        <div class="summary-details">
                            <span class="summary-title">שעות שנותרו לחודש</span>
                            <span class="summary-value" id="remaining-hours">0</span>
                        </div>
                    </div>
                    <div class="summary-card" id="completion-card">
                        <div class="summary-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="summary-details">
                            <span class="summary-title">אחוז השלמה</span>
                            <span class="summary-value" id="completion-percentage">0%</span>
                        </div>
                    </div>
                </div>

                <!-- View Toggle Button -->
                <div class="view-toggle-container">
                    <button id="toggle-view" class="btn primary-btn view-toggle-btn">
                        <i class="fas fa-calendar-alt"></i> מעבר לתצוגת לוח שנה
                    </button>
                </div>

                <!-- Calendar View -->
                <div class="calendar-container hidden" id="calendar-view">
                    <div class="calendar-header">
                        <div class="month-name" id="calendar-month-name">חודש 2025</div>
                    </div>
                    <div class="calendar-weekdays">
                        <div>ראשון</div>
                        <div>שני</div>
                        <div>שלישי</div>
                        <div>רביעי</div>
                        <div>חמישי</div>
                        <div>שישי</div>
                        <div>שבת</div>
                    </div>
                    <div class="calendar-grid" id="calendar-grid">
                        <!-- Calendar days will be inserted here dynamically -->
                    </div>
                </div>

                <!-- Table View -->
                <div class="table-container" id="table-view">
                    <table id="hours-table">
                        <thead>
                            <tr>
                                <th>תאריך</th>
                                <th>יום</th>
                                <th>משך</th>
                                <th>שעות</th>
                                <th>חג</th>
                                <th>סוג</th>
                            </tr>
                        </thead>
                        <tbody id="hours-table-body">
                            <!-- Table rows will be inserted here dynamically -->
                        </tbody>
                        <tfoot>
                            <tr id="total-row">
                                <td colspan="4"><strong>סה"כ</strong></td>
                                <td id="total-duration">00:00</td>
                                <td id="total-formatted">0 שעות 0 דקות</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <!-- Error Card -->
        <div class="card hidden" id="error-card">
            <div class="card-header error-header">
                <h2><i class="fas fa-exclamation-triangle"></i> שגיאה</h2>
            </div>
            <div class="card-body">
                <p id="error-message">אירעה שגיאה.</p>
                <button id="try-again" class="btn primary-btn">
                    <i class="fas fa-redo"></i> נסה שנית
                </button>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 מחשבון שעות חילן</p>
            <p class="note">פרטי ההתחברות שלך נשלחים רק לשרתי חילן ולעולם לא נשמרים.</p>
        </footer>
    </div>

    <script src="scripts.js"></script>
</body>
</html>